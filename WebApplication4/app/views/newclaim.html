<div class="navbar navbar-inverse navbar-fixed-top" role="navigation" data-ng-controller="NavbarController">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <!--<a class="navbar-brand" href="#/home">oergjw</a>-->
        </div>
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li><a href="#stepsearchbysnils">Добавить заявление</a></li>
                <li><a href="#persons">Заявители</a></li>
                <li><a href="#claims">Регистрация заявлений</a></li>
                <li><a href="#inwork">В работе</a></li>
                <li><a href="#rejected">Отказы</a></li>
                <li><a href="#">Список по программе</a></li>                
            </ul>
            <p data-ng-hide="!authentication.isAuth" class="navbar-text navbar-right">{{authentication.userName}}</p>
            <button data-ng-hide="!authentication.isAuth" data-ng-click="logOut()" type="button" class="btn btn-default navbar-btn navbar-right">Выйти</button>
        </div>
    </div>
</div>

<section id="body" class="container-fluid" style="min-height: 858px;">
    <div class="row">
        <div class="col-md-10">
            <div class="panel-body">                
                <form name="claimForm" role="form" class="form-horizontal" novalidate>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputLastName.$touched) && claimForm.inputLastName.$invalid }">
                        <label for="inputLastName" class="col-sm-5 control-label">Фамилия</label>
                        <div class="col-sm-7">
                            <input ng-disabled="vm.registration.personData.id" name="inputLastName" type="text" class="form-control" placeholder="Фамилия" data-ng-model="vm.registration.personData.lastName" required autofocus>
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputLastName.$touched)  && claimForm.inputLastName.$invalid"></span>
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputFirstName.$touched) && claimForm.inputFirstName.$invalid }">
                        <label for="inputFirstName" class="col-sm-5 control-label">Имя</label>
                        <div class="col-sm-7">
                            <input ng-disabled="vm.registration.personData.id" name="inputFirstName" type="text" class="form-control" placeholder="Имя" data-ng-model="vm.registration.personData.firstName" required autofocus>
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputFirstName.$touched) && claimForm.inputFirstName.$invalid"></span>
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputMiddleName.$touched) && claimForm.inputMiddleName.$invalid }">
                        <label for="inputMiddleName" class="col-sm-5 control-label">Отчество</label>
                        <div class="col-sm-7">
                            <input ng-disabled="vm.registration.personData.id" name="inputMiddleName" type="text" class="form-control" placeholder="Отчество" data-ng-model="vm.registration.personData.middleName" required autofocus>
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputMiddleName.$touched) && claimForm.inputMiddleName.$invalid"></span>
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputDateOfBirth.$touched) && claimForm.inputDateOfBirth.$invalid }">
                        <label for="inputDateOfBirth" class="col-sm-5 control-label">Дата рождения</label>
                        <div class="col-sm-7">
                            <input ng-disabled="vm.registration.personData.id" name="inputDateOfBirth" type="text" class="form-control" placeholder="Дата рождения"
                                   ng-click="vm.open($event)"
                                   uib-datepicker-popup="{{vm.format}}"
                                   data-ng-model="vm.registration.personData.dateOfBirth"
                                   is-open="vm.opened"
                                   datepicker-options="vm.dateOptions"
                                   date-disabled="disabled(date, mode)"
                                   ng-required="true" show-button-bar="false" datepicker-local-date />
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputDateOfBirth.$touched) && claimForm.inputDateOfBirth.$invalid"></span>
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputSnils.$touched) && claimForm.inputSnils.$invalid }">
                        <label for="inputSnils" class="col-sm-5 control-label">СНИЛС</label>
                        <div class="col-sm-7">
                            <input ng-disabled="vm.registration.personData.id" name="inputSnils" type="text" class="form-control" placeholder="СНИЛС" data-ng-model="vm.registration.snils" ui-mask="999-999-999 99" required autofocus style="margin-bottom: 10px">
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputSnils.$touched) && claimForm.inputSnils.$invalid"></span>
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputDocSeries.$touched) && claimForm.inputDocSeries.$invalid }">
                        <label for="inputDocSeries" class="col-sm-5 control-label">Серия документа</label>
                        <div class="col-sm-7">
                            <input ng-disabled="vm.registration.personData.id" name="inputDocSeries" type="text" class="form-control" placeholder="Серия документа" data-ng-model="vm.registration.personData.passportSeries" required autofocus>
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputDocSeries.$touched) && claimForm.inputDocSeries.$invalid"></span>
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputDocNumber.$touched) && claimForm.inputDocNumber.$invalid }">
                        <label for="inputDocNumber" class="col-sm-5 control-label">Номер документа</label>
                        <div class="col-sm-7">
                            <input ng-disabled="vm.registration.personData.id" name="inputDocNumber" type="text" class="form-control" placeholder="Номер документа" data-ng-model="vm.registration.personData.passportNumber" required autofocus>
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputDocNumber.$touched) && claimForm.inputDocNumber.$invalid"></span>
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputDocDate.$touched) && claimForm.inputDocDate.$invalid }">
                        <label for="inputDocDate" class="col-sm-5 control-label">Дата выдачи документа</label>
                        <div class="col-sm-7">
                            <input ng-disabled="vm.registration.personData.id" 
                                   name="inputDocDate" 
                                   type="text" class="form-control" 
                                   placeholder="Дата выдачи документа"
                                   ng-click="vm.open1($event)"
                                   uib-datepicker-popup="{{vm.format}}"
                                   data-ng-model="vm.registration.personData.passportDate"
                                   is-open="vm.opened1"
                                   datepicker-options="vm.dateOptions"
                                   date-disabled="disabled(date, mode)"
                                   ng-required="true" show-button-bar="false" datepicker-local-date />
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputDocDate.$touched) && claimForm.inputDocDate.$invalid"></span>
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputInn.$touched) && claimForm.inputInn.$invalid }">
                        <label for="inputInn" class="col-sm-5 control-label">ИНН</label>
                        <div class="col-sm-7">
                            <input name="inputInn" type="text" class="form-control" placeholder="ИНН" data-ng-model="vm.registration.claim.inn" ui-mask="999999999999" required autofocus style="margin-bottom: 10px">
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputInn.$touched) && claimForm.inputInn.$invalid"></span>
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputRegAddress.$touched) && claimForm.inputRegAddress.$invalid }">
                        <label for="inputRegAddress" class="col-sm-5 control-label">Адрес регистрации</label>
                        <div class="col-sm-7">
                            <input name="inputRegAddress" type="text" class="form-control" placeholder="Адрес" data-ng-model="vm.registration.claim.regAddress" required autofocus>
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputRegAddress.$touched) && claimForm.inputRegAddress.$invalid"></span>
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputPost1Address.$touched) && claimForm.inputPost1Address.$invalid }">
                        <label for="inputPost1Address" class="col-sm-5 control-label">Почтовый адрес</label>
                        <div class="col-sm-7">
                            <input name="inputPost1Address" type="text" class="form-control" placeholder="Адрес" data-ng-model="vm.registration.claim.postAddress" required autofocus>
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputPost1Address.$touched) && claimForm.inputPost1Address.$invalid"></span>
                        </div>
                    </div>
                    <!--<div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputPostAddress.$touched) && claimForm.inputPostAddress.$invalid }">
                        <label for="inputPostAddress" class="col-sm-5 control-label">Почтовый адрес</label>
                        <div class="col-sm-7">
                            <input name="inputPostAddress" type="text" class="form-control" placeholder="Адрес" data-ng-model="vm.registration.claim.postAddress" required autofocus>
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputPostAddress.$touched) && claimForm.inputPostAddress.$invalid"></span>
                        </div>
                    </div>-->
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputJob.$touched) && claimForm.inputJob.$invalid }">
                        <label for="inputJob" class="col-sm-5 control-label">Наименование организации</label>
                        <div class="col-sm-7">
                            <input name="inputJob" type="text" class="form-control" placeholder="Наименование" data-ng-model="vm.registration.claim.job" required autofocus>
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputJob.$touched) && claimForm.inputJob.$invalid"></span>
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputJobSphere.$touched) && claimForm.inputJobSphere.$invalid }">
                        <label for="inputJobSphere" class="col-sm-5 control-label">Сфера деятельности</label>
                        <div class="col-sm-7">
                            <input name="inputJobSphere" type="text" class="form-control" placeholder="Сфера деятельности" data-ng-model="vm.registration.claim.jobSphere" required autofocus>
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputJobSphere.$touched) && claimForm.inputJobSphere.$invalid"></span>
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputPosition.$touched) && claimForm.inputPosition.$invalid }">
                        <label for="inputPosition" class="col-sm-5 control-label">Должность</label>
                        <div class="col-sm-7">
                            <input name="inputPosition" type="text" class="form-control" placeholder="Должность" data-ng-model="vm.registration.claim.position" required autofocus>
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputPosition.$touched) && claimForm.inputPosition.$invalid"></span>
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputFamilyIncome.$touched) && claimForm.inputFamilyIncome.$invalid }">
                        <label for="inputFamilyIncome" class="col-sm-5 control-label">Среднемесячный совокупный доход семьи</label>
                        <div class="col-sm-7">
                            <input name="inputFamilyIncome" type="text" class="form-control" placeholder="Доход" data-ng-model="vm.registration.claim.familyIncome" required autofocus>
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputFamilyIncome.$touched) && claimForm.inputFamilyIncome.$invalid"></span>
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputPersonalIncome.$touched) && claimForm.inputPersonalIncome.$invalid }">
                        <label for="inputPersonalIncome" class="col-sm-5 control-label">Персональный доход</label>
                        <div class="col-sm-7">
                            <input name="inputPersonalIncome" type="text" class="form-control" placeholder="Доход" data-ng-model="vm.registration.claim.personalIncome" required autofocus>
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputPersonalIncome.$touched) && claimForm.inputPersonalIncome.$invalid"></span>
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputOwnership.$touched) && claimForm.inputOwnership.$invalid }">
                        <label for="inputOwnership" class="col-sm-5 control-label">Собственность гражданина, Кадастровый номер (Текстовое поле)</label>
                        <div class="col-sm-7">
                            <input name="inputOwnership" type="text" class="form-control" placeholder="Собственность" data-ng-model="vm.registration.claim.ownership" required autofocus>
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputOwnership.$touched) && claimForm.inputOwnership.$invalid"></span>
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.selectBuilding.$touched) && claimForm.selectBuilding.$invalid }">
                        <label for="selectBuilding" class="col-sm-5 control-label">Объект строительства</label>
                        <div class="col-sm-7">
                            <select class="form-control" name="selectBuilding" ng-model="vm.registration.claim.buildingid">
                                <option ng-repeat="building in vm.buildings" value="{{ building.id }}">{{ building.title }}</option>
                            </select> 
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.selectBuilding.$touched) && claimForm.selectBuilding.$invalid"></span>
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputEmail.$touched) && claimForm.inputEmail.$invalid }">
                        <label for="inputEmail" class="col-sm-5 control-label">Электронный адрес(Email)</label>
                        <div class="col-sm-7">
                            <div class="input-group">
                                <input name="inputEmail" type="text" class="form-control" placeholder="Email" data-ng-model="vm.registration.claim.email" required autofocus>
                            </div>
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputEmail.$touched) && claimForm.inputEmail.$invalid"></span>
                            <p class="help-block">Например: vasya123@mail.ru</p>
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{ 'has-error': (claimForm.$submitted || claimForm.inputPhone.$touched) && claimForm.inputPhone.$invalid }">
                        <label for="inputPhone" class="col-sm-5 control-label">Номер мобильного телефона</label>
                        <div class="col-sm-7">
                            <div class="input-group">
                                <span class="input-group-addon" id="inputAddonPhoneNumber">+7</span>
                                <input name="inputPhone" type="text" class="form-control" aria-describedly="inputAddonPhoneNumber" placeholder="Номер телефона" ui-mask="(999) 99 99999" data-ng-model="vm.registration.claim.phone" required autofocus>
                            </div>
                            <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(claimForm.$submitted || claimForm.inputPhone.$touched) && claimForm.inputPhone.$invalid"></span>
                            <p class="help-block">Введите последние 10 цифр номера</p>
                        </div>
                    </div>
                    <!--<button class="btn btn-lg btn-primary btn-block" type="submit" data-ng-click="signUp()" style="margin-bottom: 10px;">Готово</button>-->
                    <div class="form-group">
                        <div class="col-sm-3 col-sm-offset-5">
                            <input class="btn btn-primary" type="submit" data-ng-click="vm.create()" style="margin-bottom: 10px;" value="Готово" ng-disabled="claimForm.$invalid" />
                            <input class="btn btn-danger" type="submit" data-ng-click="vm.openRejectCause()" style="margin-bottom: 10px;" value="Сохранить с отказом" />
                        </div>
                    </div>                    
                </form>
            </div>
        </div>
    </div>
</section>

<script type="text/ng-template" id="RejectCause.html">
    <div class="modal-header">
        <h3 class="modal-title">Отказ</h3>
    </div>
    <div class="modal-body">
        <form name="rejectForm" role="form" class="form-horizontal" novalidate>
            <div class="form-group has-feedback" ng-class="{ 'has-error': (rejectForm.$submitted || rejectForm.selectCause.$touched) && rejectForm.selectCause.$invalid }">
                <label for="selectCause" class="col-sm-5 control-label">Основание отказа</label>
                <div class="col-sm-7">
                    <select class="form-control" name="selectCause" ng-model="vm.reject.causeid">
                        <option ng-repeat="cause in vm.rejectCauses" value="{{ cause.id }}">{{ cause.text }}</option>
                    </select>
                    <span class="glyphicon glyphicon-ban-circle form-control-feedback" aria-hidden="true" ng-show="(rejectForm.$submitted || rejectForm.selectCause.$touched) && rejectForm.selectCause.$invalid"></span>
                </div>
            </div>
        </form>
</div>
    <div class="modal-footer">
        <button class="btn btn-primary" type="button" ng-click="vm.ok()">OK</button>
        <button class="btn btn-warning" type="button" ng-click="vm.cancel()">Cancel</button>
    </div>
</script>
